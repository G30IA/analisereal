<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Gerente G30 - Lean Six Sigma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @media print {
            .print\:hidden { display: none !important; }
            .print\:shadow-none { shadow: none !important; }
            .print\:border-none { border: none !important; }
            body { background: white; }
        }
        .step-content { display: none; }
        .step-content.active { display: block; }
    </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900 font-sans">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-4 shadow-lg sticky top-0 z-10 print:hidden">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="bg-orange-500 p-2 rounded-lg text-white">
                    <i data-lucide="car"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-tight">Meu Gerente <span class="text-orange-400">G30</span></h1>
                    <p class="text-xs text-slate-400">Lean Six Sigma para Seminovos</p>
                </div>
            </div>
            <div class="hidden md:flex gap-4" id="desktop-nav">
                <!-- Nav buttons injected by JS -->
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-8 print:p-0">
        <!-- Progress Mobile -->
        <div class="md:hidden mb-6 overflow-x-auto flex gap-2 pb-2 print:hidden" id="mobile-nav">
            <!-- Nav buttons injected by JS -->
        </div>

        <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden min-h-[600px] print:shadow-none print:border-none">
            
            <!-- STEP: WELCOME -->
            <section id="step-welcome" class="step-content p-12 flex flex-col items-center justify-center text-center space-y-6">
                <div class="w-24 h-24 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center">
                    <i data-lucide="users" size="48"></i>
                </div>
                <h2 class="text-3xl font-bold text-slate-800">Nova Consultoria de CS</h2>
                <p class="max-w-md text-slate-600">
                    Olá Analista! Vamos identificar por que a loja não está performando como deveria. 
                    Siga os pilares da metodologia G30 para um diagnóstico preciso.
                </p>
                <div class="w-full max-w-sm space-y-4">
                    <input type="text" id="store-name" placeholder="Nome da Loja" class="w-full p-3 border rounded-xl focus:ring-2 focus:ring-orange-500 outline-none">
                    <input type="text" id="analyst-name" placeholder="Seu Nome (Analista)" class="w-full p-3 border rounded-xl focus:ring-2 focus:ring-orange-500 outline-none">
                    <button onclick="goToStep('swot')" id="btn-start" disabled class="w-full bg-slate-900 text-white p-4 rounded-xl font-bold hover:bg-slate-800 disabled:opacity-50 transition-all flex items-center justify-center gap-2">
                        Começar Diagnóstico <i data-lucide="chevron-right"></i>
                    </button>
                </div>
            </section>

            <!-- STEP: SWOT -->
            <section id="step-swot" class="step-content p-6 md:p-8">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold">Análise SWOT Automotiva</h2>
                        <p class="text-slate-500">Avalie o ambiente interno e externo da loja.</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs font-bold text-slate-400 uppercase">Pilar G30</span>
                        <p class="text-sm font-semibold">Visão Macro</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="swot-grid">
                    <!-- SWOT Categories injected here -->
                </div>

                <div class="mt-8 flex justify-end">
                    <button onclick="goToStep('ishikawa')" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition-all">
                        Ir para Ishikawa
                    </button>
                </div>
            </section>

            <!-- STEP: ISHIKAWA -->
            <section id="step-ishikawa" class="step-content p-6 md:p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold">Diagrama de Ishikawa (G30)</h2>
                    <p class="text-slate-500">Identifique as causas prováveis para o problema central.</p>
                </div>

                <div class="bg-slate-900 p-4 rounded-xl mb-8 text-white flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="bg-red-500 p-2 rounded-lg"><i data-lucide="alert-triangle"></i></div>
                        <div>
                            <span class="text-xs text-slate-400 uppercase font-bold">O Problema (Efeito)</span>
                            <p class="text-lg font-bold">Baixa Performance de Vendas/Conversão</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="ishikawa-grid">
                    <!-- Ishikawa categories injected here -->
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="goToStep('swot')" class="px-6 py-3 font-semibold text-slate-500">Voltar</button>
                    <button onclick="goToStep('qfd')" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition-all">
                        Analisar Impacto (QFD)
                    </button>
                </div>
            </section>

            <!-- STEP: QFD -->
            <section id="step-qfd" class="step-content p-6 md:p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold">Matriz de Priorização (QFD)</h2>
                    <p class="text-slate-500">Avalie o impacto real das falhas na percepção do cliente final.</p>
                </div>

                <div class="overflow-hidden border rounded-xl shadow-sm">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b">
                            <tr>
                                <th class="p-4 font-bold text-slate-600">Voz do Cliente (O quê)</th>
                                <th class="p-4 font-bold text-slate-600 text-center">Importância (1-5)</th>
                                <th class="p-4 font-bold text-slate-600">Gap Atual (Seu Diagnóstico)</th>
                            </tr>
                        </thead>
                        <tbody id="qfd-body" class="divide-y">
                            <!-- QFD Rows injected here -->
                        </tbody>
                    </table>
                </div>

                <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3">
                    <i data-lucide="info" class="text-blue-500 mt-1"></i>
                    <p class="text-sm text-blue-800">
                        <strong>Dica de Especialista:</strong> Foque nos itens onde a <strong>Importância</strong> é alta (5) e o <strong>Gap</strong> também é alto. Estes são os pontos de alavancagem.
                    </p>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="goToStep('ishikawa')" class="px-6 py-3 font-semibold text-slate-500">Voltar</button>
                    <button onclick="goToStep('5whys')" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition-all">
                        Causa Raiz (5 Porquês)
                    </button>
                </div>
            </section>

            <!-- STEP: 5 WHYS -->
            <section id="step-5whys" class="step-content p-6 md:p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold">Técnica dos 5 Porquês</h2>
                    <p class="text-slate-500">Escolha a causa mais crítica e desça até a raiz do desperdício.</p>
                </div>

                <div class="space-y-4 max-w-2xl mx-auto" id="whys-container">
                    <!-- Whys inputs injected here -->
                </div>

                <div class="mt-12 flex justify-between">
                    <button onclick="goToStep('qfd')" class="px-6 py-3 font-semibold text-slate-500">Voltar</button>
                    <button onclick="goToStep('report')" class="bg-orange-500 text-white px-8 py-3 rounded-xl font-bold hover:bg-orange-600 shadow-lg transition-all">
                        Gerar Relatório Final
                    </button>
                </div>
            </section>

            <!-- STEP: REPORT -->
            <section id="step-report" class="step-content p-6 md:p-8">
                <div class="flex justify-between items-center mb-8 border-b pb-4 print:border-none">
                    <div>
                        <h2 class="text-2xl font-bold">Diagnóstico Estratégico G30</h2>
                        <p class="text-slate-500">Loja: <span id="report-store-name" class="text-slate-900 font-semibold">-</span></p>
                    </div>
                    <div class="text-right text-sm">
                        <p class="text-slate-400">Data do Diagnóstico</p>
                        <p id="report-date" class="font-bold">-</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="space-y-6">
                        <div class="bg-slate-50 p-4 rounded-xl border">
                            <h3 class="text-sm font-bold uppercase text-slate-500 mb-3 flex items-center gap-2">
                                <i data-lucide="trending-up" size="16"></i> Resumo SWOT
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <p class="text-xs font-bold text-red-500 uppercase">Maior Fraqueza</p>
                                    <p id="report-weakness" class="text-sm">-</p>
                                </div>
                                <div>
                                    <p class="text-xs font-bold text-blue-500 uppercase">Melhor Oportunidade</p>
                                    <p id="report-opportunity" class="text-sm">-</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-orange-50 p-4 rounded-xl border border-orange-100">
                            <h3 class="text-sm font-bold uppercase text-orange-600 mb-3 flex items-center gap-2">
                                <i data-lucide="alert-triangle" size="16"></i> Causa Raiz
                            </h3>
                            <div id="report-root-cause" class="p-3 bg-white rounded-lg border border-orange-200 font-bold text-slate-800 shadow-sm italic">
                                "-"
                            </div>
                        </div>
                    </div>

                    <div class="md:col-span-2 space-y-6">
                        <h3 class="font-bold text-lg flex items-center gap-2">
                            <i data-lucide="check-circle-2" class="text-green-500"></i> Plano de Ação Recomendado
                        </h3>
                        
                        <div class="space-y-3">
                            <div class="flex gap-4 p-4 bg-white border rounded-xl">
                                <div class="w-10 h-10 rounded-full bg-slate-900 text-white flex flex-shrink-0 items-center justify-center font-bold">M</div>
                                <div>
                                    <h4 class="font-bold">Ação em Marketing (G30)</h4>
                                    <p class="text-sm text-slate-600">Otimizar o processo de captura de leads e automação de resposta imediata (SLA < 5 min).</p>
                                </div>
                            </div>
                            <div class="flex gap-4 p-4 bg-white border rounded-xl">
                                <div class="w-10 h-10 rounded-full bg-slate-900 text-white flex flex-shrink-0 items-center justify-center font-bold">V</div>
                                <div>
                                    <h4 class="font-bold">Ação em Vendas</h4>
                                    <p class="text-sm text-slate-600">Treinamento em gatilhos de escassez e autoridade para converter leads.</p>
                                </div>
                            </div>
                        </div>

                        <div class="p-6 bg-slate-900 text-white rounded-2xl print:bg-white print:text-black print:border">
                            <h4 class="font-bold mb-2 flex items-center gap-2 text-orange-400 print:text-black">
                                <i data-lucide="target" size="18"></i> Visão do Analista (<span id="report-analyst">-</span>)
                            </h4>
                            <p class="text-sm text-slate-300 leading-relaxed print:text-black">
                                A análise aponta variabilidade no processo de atendimento. O foco imediato deve ser a padronização do "Método de Vendas" para reduzir desperdícios.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-12 pt-8 border-t flex justify-between print:hidden">
                    <button onclick="goToStep('5whys')" class="px-6 py-3 font-semibold text-slate-500">Voltar para Edição</button>
                    <div class="flex gap-3">
                        <button onclick="window.print()" class="bg-slate-100 text-slate-700 px-6 py-3 rounded-xl font-bold border hover:bg-slate-200 transition-all flex items-center gap-2">
                            <i data-lucide="printer" size="16"></i> Imprimir
                        </button>
                        <button onclick="window.location.reload()" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition-all">
                            Novo Diagnóstico
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="max-w-6xl mx-auto p-8 text-center text-slate-400 text-sm print:hidden">
        <p>© 2024 Metodologia G30 Inteligência Automotiva - Especialista em Lean Six Sigma</p>
    </footer>

    <script>
        // --- DATA STATE ---
        let state = {
            activeStep: 'welcome',
            storeData: { name: '', analyst: '', date: new Date().toLocaleDateString('pt-BR') },
            swot: { strengths: [], weaknesses: [], opportunities: [], threats: [] },
            ishikawa: {
                metodo: { title: 'Método (Processos)', causes: [] },
                maoObra: { title: 'Mão de Obra (Pessoas)', causes: [] },
                maquina: { title: 'Máquina (Tecnologia)', causes: [] },
                material: { title: 'Material (Estoque)', causes: [] },
                medida: { title: 'Medida (KPIs)', causes: [] },
                meioAmbiente: { title: 'Ambiente (Loja)', causes: [] }
            },
            qfd: [
                { id: 1, voc: 'Confiança na Procedência', importance: 5, impact: 0 },
                { id: 2, voc: 'Rapidez na Resposta', importance: 4, impact: 0 },
                { id: 3, voc: 'Transparência no Negócio', importance: 5, impact: 0 },
                { id: 4, voc: 'Qualidade das Fotos/Vídeos', importance: 3, impact: 0 }
            ],
            fiveWhys: ['', '', '', '', '']
        };

        const steps = [
            { id: 'welcome', label: 'Início', icon: 'car' },
            { id: 'swot', label: 'SWOT', icon: 'trending-up' },
            { id: 'ishikawa', label: 'Ishikawa', icon: 'target' },
            { id: 'qfd', label: 'QFD', icon: 'bar-chart' },
            { id: '5whys', label: 'Causa Raiz', icon: 'alert-triangle' },
            { id: 'report', label: 'Relatório', icon: 'clipboard-list' }
        ];

        // --- NAVIGATION ---
        function goToStep(stepId) {
            state.activeStep = stepId;
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.getElementById(`step-${stepId}`).classList.add('active');
            renderNav();
            if (stepId === 'report') renderReport();
            lucide.createIcons();
            window.scrollTo(0, 0);
        }

        function renderNav() {
            const desktopNav = document.getElementById('desktop-nav');
            const mobileNav = document.getElementById('mobile-nav');
            
            const navHtml = steps.map(s => `
                <button onclick="goToStep('${s.id}')" class="flex items-center gap-1 px-3 py-1 rounded-full text-sm transition-colors ${state.activeStep === s.id ? 'bg-orange-500 text-white' : 'hover:bg-slate-800 text-slate-300'}">
                    <i data-lucide="${s.icon}" size="16"></i> <span class="ml-1">${s.label}</span>
                </button>
            `).join('');

            const mobileHtml = steps.map(s => `
                <button onclick="goToStep('${s.id}')" class="flex-shrink-0 px-4 py-2 rounded-lg text-sm font-medium ${state.activeStep === s.id ? 'bg-orange-500 text-white' : 'bg-white border text-slate-600'}">
                    ${s.label}
                </button>
            `).join('');

            desktopNav.innerHTML = navHtml;
            mobileNav.innerHTML = mobileHtml;
        }

        // --- INPUT HANDLERS ---
        document.getElementById('store-name').addEventListener('input', (e) => {
            state.storeData.name = e.target.value;
            document.getElementById('btn-start').disabled = !e.target.value;
        });
        document.getElementById('analyst-name').addEventListener('input', (e) => {
            state.storeData.analyst = e.target.value;
        });

        // --- SWOT RENDERING ---
        const swotMeta = [
            { key: 'strengths', label: 'Forças', color: 'border-green-500 bg-green-50', text: 'text-green-700' },
            { key: 'weaknesses', label: 'Fraquezas', color: 'border-red-500 bg-red-50', text: 'text-red-700' },
            { key: 'opportunities', label: 'Oportunidades', color: 'border-blue-500 bg-blue-50', text: 'text-blue-700' },
            { key: 'threats', label: 'Ameaças', color: 'border-orange-500 bg-orange-50', text: 'text-orange-700' }
        ];

        function renderSwot() {
            const grid = document.getElementById('swot-grid');
            grid.innerHTML = swotMeta.map(cat => `
                <div class="p-4 border-l-4 rounded-r-xl ${cat.color}">
                    <h3 class="font-bold mb-3 flex items-center justify-between ${cat.text}">
                        ${cat.label} <i data-lucide="info" size="14"></i>
                    </h3>
                    <div class="space-y-2 mb-3">
                        ${state.swot[cat.key].map((item, i) => `
                            <div class="flex justify-between items-center bg-white p-2 rounded border text-sm group">
                                ${item}
                                <button onclick="removeItem('swot', '${cat.key}', ${i})" class="text-slate-300 hover:text-red-500">
                                    <i data-lucide="trash-2" size="14"></i>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    <input type="text" placeholder="Adicionar..." onkeydown="handleEnter(event, 'swot', '${cat.key}')" class="w-full text-sm p-2 border rounded outline-none focus:ring-1 focus:ring-slate-400">
                </div>
            `).join('');
            lucide.createIcons();
        }

        // --- ISHIKAWA RENDERING ---
        function renderIshikawa() {
            const grid = document.getElementById('ishikawa-grid');
            grid.innerHTML = Object.keys(state.ishikawa).map(key => `
                <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                    <h4 class="font-bold text-slate-700 border-b pb-2 mb-3 flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-orange-500"></div> ${state.ishikawa[key].title}
                    </h4>
                    <ul class="space-y-2 mb-4">
                        ${state.ishikawa[key].causes.map((cause, i) => `
                            <li class="text-sm bg-white p-2 rounded border flex items-center gap-2">
                                <i data-lucide="chevron-right" size="12" class="text-orange-500"></i> ${cause}
                            </li>
                        `).join('')}
                    </ul>
                    <input type="text" placeholder="Adicionar causa..." onkeydown="handleEnter(event, 'ishikawa', '${key}')" class="w-full text-xs p-2 border rounded outline-none">
                </div>
            `).join('');
            lucide.createIcons();
        }

        // --- QFD RENDERING ---
        function setQfdImpact(idx, val) {
            state.qfd[idx].impact = val;
            renderQfd();
        }

        function renderQfd() {
            const body = document.getElementById('qfd-body');
            body.innerHTML = state.qfd.map((item, idx) => `
                <tr class="hover:bg-slate-50 transition-colors">
                    <td class="p-4 font-medium">${item.voc}</td>
                    <td class="p-4 text-center">
                        <span class="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm font-bold">${item.importance}</span>
                    </td>
                    <td class="p-4">
                        <div class="flex gap-2">
                            ${[1,2,3,4,5].map(v => `
                                <button onclick="setQfdImpact(${idx}, ${v})" class="w-8 h-8 md:w-10 md:h-10 rounded-lg border flex items-center justify-center font-bold transition-all ${item.impact === v ? 'bg-slate-900 text-white border-slate-900' : 'bg-white hover:bg-slate-100'}">
                                    ${v}
                                </button>
                            `).join('')}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // --- 5 WHYS RENDERING ---
        function renderWhys() {
            const container = document.getElementById('whys-container');
            container.innerHTML = state.fiveWhys.map((w, i) => `
                <div class="flex gap-4 items-start">
                    <div class="flex flex-col items-center">
                        <div class="w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-xs font-bold">${i+1}</div>
                        ${i < 4 ? '<div class="w-0.5 h-12 bg-slate-200"></div>' : ''}
                    </div>
                    <div class="flex-1 pt-1">
                        <label class="text-xs font-bold text-slate-400 uppercase">Por que?</label>
                        <input type="text" value="${w}" oninput="state.fiveWhys[${i}] = this.value" class="w-full p-3 border-b border-slate-200 outline-none focus:border-orange-500 transition-colors text-lg italic bg-transparent">
                    </div>
                </div>
            `).join('');
        }

        // --- SHARED HELPERS ---
        function handleEnter(e, type, category) {
            if (e.key === 'Enter') {
                const val = e.target.value;
                if (!val.trim()) return;
                if (type === 'swot') state.swot[category].push(val);
                if (type === 'ishikawa') state.ishikawa[category].causes.push(val);
                e.target.value = '';
                type === 'swot' ? renderSwot() : renderIshikawa();
            }
        }

        function removeItem(type, category, index) {
            state[type][category].splice(index, 1);
            renderSwot();
        }

        function renderReport() {
            document.getElementById('report-store-name').innerText = state.storeData.name;
            document.getElementById('report-analyst').innerText = state.storeData.analyst;
            document.getElementById('report-date').innerText = state.storeData.date;
            document.getElementById('report-weakness').innerText = state.swot.weaknesses[0] || 'Não informada';
            document.getElementById('report-opportunity').innerText = state.swot.opportunities[0] || 'Não informada';
            document.getElementById('report-root-cause').innerText = `"${state.fiveWhys[4] || state.fiveWhys[0] || 'Pendente'}"`;
        }

        // --- INITIALIZATION ---
        window.onload = () => {
            renderNav();
            renderSwot();
            renderIshikawa();
            renderQfd();
            renderWhys();
            goToStep('welcome');
        };
    </script>
</body>
</html>
